<!DOCTYPE html>
{% load static %}

<html>
    <head>
        <meta charset="utf-8">
        <title> 날씨 표시 - with django </title>
        <script src ="https://unpkg.com/vue"></script>
        <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
        <style>
        *{
            box-sizing: border-box;
        }
        
        body {
            font-family: Arial, Helvetica, sans-serif;
        }
        
        /* Style the header */
        header {
            background-color: rgb(226, 184, 228);
            padding: 30px;
            text-align: center;
            font-size: 35px;
            /* color: white; */
        }
        
        /* Create two columns/boxes that floats next to each other */
        nav {
            float: left;
            width: 30%;
            height: 800px; /* only for demonstration, should be removed */
            background: rgb(241, 218, 243);
            padding: 20px;
        }
        
        /* Style the list inside the menu */
        nav ul {
            list-style-type: none;
            padding: 0;
        }
        
        article {
            float: left;
            padding: 20px;
            width: 70%;
            background-color: #f1f1f1;
            height: 800px; /* only for demonstration, should be removed */
        }
        
        /* Clear floats after the columns */
        section:after {
            content: "";
            display: table;
            clear: both;
        }
        
        /* Style the footer */
        footer {
            background-color:rgb(226, 184, 228);
            padding: 10px;
            text-align: center;
            color: white;
        }
        
        /* Responsive layout - makes the two columns/boxes stack on top of each other instead of next to each other, on small screens */
        @media (max-width: 600px) {
            nav, article {
            width: 100%;
            height: auto;
            }
        }
        </style>
    </head>
    <body>
        <div id = "app">
            <header>
                <h2 style="color:black; float:left;margin-right: 1000px;">날씨 표시 Application</h2>
                <img v-bind:src='image' v-if='image_show'><br>
            </header>
            <section>
                <nav>
                    <h>Reporter Moon Chae Won</h>
                    <video width="450" controls :src="video">
                    </video>
                </nav>
                <article>
                    <h1>{{city}}</h1>{{product}}
                    <p>Input City : </p>
                    <weather></weather>
                  </article>
            </section>      
            <footer>
				Designed By : <a href="https://github.com/jeon3029" >jeon3029</a>
			</footer>          
            <!-- <p> {{ product }} </p> -->
        </div>

        <script>
            Vue.component('weather', {
      template:`
        <div>
        <input v-model="city" placeholder="도시명">
        <button v-on:click="updateWeather">확인</button>
        <p v-for="w in weather">
          description : {{w.description}} <br />
          <img :src="icon_url" /> <br />
          <img :src="map_url" />
        </p>
        </div>
      `,
      data : function() {
        return {
          city:'Seoul',
          icon_url:'',
          map_url:'',
          weather:null,
        }
      },
      methods: {
        getIconURL: function(n) {
          return '//openweathermap.org/img/w/'+n+'.png';
        },
        getMapURL: function(city) {
          return 'https://maps.googleapis.com/maps/api/staticmap?center='+city+'&zoom=13&size=600x300&maptype=roadmap&key="your_key"';
        },
        updateWeather: function() {
          var url = '//api.openweathermap.org/data/2.5/weather?q='+this.city+'&appid="your_key"';
          axios.get(url).then(res => {
            console.log(JSON.stringify(res.data));

            this.weather = res.data.weather;
            this.icon_url = this.getIconURL(this.weather[0].icon);
            this.map_url = this.getMapURL(this.city);
          });
        }
      }
    });
            var app = new Vue({
                el:"#app",
                data:{
                    product:'test',
                    image : "{% static 'img/ssafy.png' %}",
                    video :"{% static 'img/moon.mp4' %}",
                    image_show: true,
                    city:'Seoul'
                }
            });
        </script>
    </body>   
</html>